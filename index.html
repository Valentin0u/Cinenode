<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon">    
    <title>Cinénode </title>
    <link rel="stylesheet" href="./public/style.css">
    <link rel="shortcut icon" href="./public/images/favicon.png" type="image/x-icon">
</head>
<body>
    <header>
<nav class="navbar background">
    <ul class="nav-list">
        <li><a href="./index">Cinénode</a></li>
        <li><a href="./index">Mes Films</a></li>
        <li><a href="./index">Recherche MovieDB</a></li>
        <li><span id="./index"><a href="./index">Connexion</a></span></li>
    </ul>
</nav>    </header>
    <div class="central">
        <div id="banner">
            <img src="./public/images/banner.png" alt="banner titre">
        </div>
            <div class="presentation">
                <strong>Cinénode</strong> vous permet de pouvoir chercher les informations sur des films en se basant sur la base de donnée : <em> The Movie Database </em> via le menu <em>Recherche MovieDB</em> mais il vous permet aussi de pouvoir ajouter à votre <em>compte personnel</em> (sécurisé par token avec Jwt entre autre), les films que vous aimez afin de pouvoir avoir une liste détaillée des informations les concernant. Cette liste se trouve sur le menu <em>Mes Films</em>. Dans ce menu, vous pourrez ajouter, modifier et supprimer des films qui seront stockés sur la base de donnée MongoDB afin de pouvoir y accéder très facilement.
                <br>
                <strong><center>Ce site est développé en Node.JS</center></strong>
            </div>
    </div>
    <footer>     
        <hr>
<p> Copyright &copy; 2022 Valentin</p>

<script>
   
   (function(exports, d) {
        function domReady(fn, context) {

            function onReady(event) {
                d.removeEventListener("DOMContentLoaded", onReady);
                fn.call(context || exports, event);
            }

            function onReadyIe(event) {
                if (d.readyState === "complete") {
                    d.detachEvent("onreadystatechange", onReadyIe);
                    fn.call(context || exports, event);
                }
            }

            d.addEventListener && d.addEventListener("DOMContentLoaded", onReady) ||
            d.attachEvent      && d.attachEvent("onreadystatechange", onReadyIe);
        }

        exports.domReady = domReady;
    })(window, document);

    domReady(function() {
        console.log('DOM is ready :)');
        
        var connectionLinkArea = document.querySelector('#connectionLink');
        testUserStatus();

        function testUserStatus() {
            if(localStorage.getItem('token')) {
                displayLoggedInView();
            } else {
                displayLoggedOutView();
            }
        }

        function displayLoggedInView() {
            connectionLinkArea.innerHTML = '<a href="/login">Déconnexion</a>';
        }

        function displayLoggedOutView() {
            connectionLinkArea.innerHTML = '<a href="/login">Connexion</a>';            
        }

    });

</script>
    </footer>
    </body>
</html>
